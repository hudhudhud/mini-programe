<!--index.wxml-->
<view class="container">
  <view class="search {{sortVisible?'sort':''}}" >
    <view class="search-bar" wx:if='{{!searchStatus}}' >
      <view class="just-show" bindtap="goSearch">
        <i class="fa fa-search" aria-hidden="true"></i><span>搜索</span>
      </view>
      <view class="sort-btn" bindtap='showSortAction'><i class="fa fa-sort-amount-desc gray" aria-hidden="true" wx:if='{{sortVisible}}'></i></view>
    </view>
    <view class="search-bar" wx:else>
      <view class="search-input">
        <i class="fa fa-search" aria-hidden="true"></i>
        <input class="search-input"  placeholder="搜索" focus="true" model:value="{{searchStr}}" bindinput="search_bindKeyInput"/>
      </view>
      <view class='cancel-btn' bindtap="cancelSearch"> 取消 </view>
    </view>
  </view>
  <view wx:if="{{!searchStatus|| (searchStatus&&!searchStr)}}">
    <slot />
  </view>

  <view class="pop-fix" wx:if='{{searchStatus&&!searchStr}}'></view>
  <view class="search-res" wx:if="{{searchStatus&&searchStr}}">
    <view wx:for="{{searchResList}}" class="folder-module" wx:key='index'>
      <text class="title">{{item.title}}</text>
      <view wx:for='{{item.files}}' class="folder-line" wx:for-item="file" wx:key='index'>
        <view class="left">
          <i class="fa fa-folder" aria-hidden="true"></i>
          <text class="folder-name">{{file.name}}</text>
        </view>
        <view bindtap="goInfo" class="info-btn right" data-item="{{item}}">
           <i class="fa fa-exclamation-circle gray" aria-hidden="true" ></i>
        </view>
      </view>
    </view>
    <view wx:if="{{searchResList.length==0&&!loading}}" class="no-data">
        <i class="fa fa-search" aria-hidden="true"></i>
        <text>无搜索结果</text>
    </view>
  </view>
</view>
