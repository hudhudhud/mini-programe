<!--pages/spaceUserList/index.wxml-->
<view class="container">
  <view class="users">
    <!-- <view class="user">
      <view class="left">
          <view class="user-img">
            <cover-image src='{{user.avatar}}' wx:if='{{user.avatar}}'></cover-image>
            <i class="fa fa-user" aria-hidden="true" wx:else></i> 
          </view>
          <text class="name">{{user.name}}</text>
      </view>
      <view class="right">
        <text class="name" class="role">管理员</text>
      </view>
    </view> -->
    <view class="user" wx:for="{{permissionsList}}" wx:key="index">
      <view class="left">
          <view class="user-img" wx:if='{{item.accessType===0}}'>
            <image src='{{item.imgUrl}}' wx:if='{{item.imgUrl}}'></image>
            <i class="fa fa-user" aria-hidden="true" wx:else></i> 
          </view>
          <view class="user-img" wx:else>
            <i class="fa fa-folder" aria-hidden="true"></i>
          </view>
          <text class="name">{{item.accessorName?item.accessorName:item.bizId}}</text>
      </view>
      <!-- 管理员可以修改别人权限 -->
      <view class="right operate" bindtap="setOperateRole" data-item="{{item}}" data-index="{{index}}" wx:if='{{userIsAdmin}}'>
        <text class="name" class="role">{{item.isAdmin?'管理员':item.permissionType==1?'可编辑':'仅浏览'}}</text> <i class="fa fa-caret-down" aria-hidden="true"></i>
      </view> 
      <view class="right operate" wx:else>
        <text class="name" class="role">{{item.isAdmin?'管理员':item.permissionType==1?'可编辑':'仅浏览'}}</text>
      </view> 
    </view>
  </view>
  <button class="confirm-btn" bindtap="confirmTap" loading="{{submiting}}" style='width:100%' wx:if='{{userIsAdmin}}' disabled="{{permissionsList.length==0}}">
    <text>完成</text>
  </button>
</view>
